# C

## chxdummy
※SRAMの内容を破壊するので、破壊しても構わないエミュレータ上でのみ試してください。

Xellent30用インストーラch30inst.x、chxinst.xは、SRAMに既に別のプログラムが組み込まれていても
空き領域を検索し共存してインストールすることができます。
その機能を試すためのツールです。

ch30*.sysがインストールできる最小限の領域だけ残して、何もしないダミープログラムを組み込みます。

使用法:
```
chxdummy ch30_omake.sys
chxinst ch30_omake.sys
```


## closerewindatr
コマンドライン引数で指定したファイルを書き込みモードでオープンし、
ファイル末尾に改行を追記、読み込み専用属性を反転してからクローズします。  
ファイル更新後に`DOS _CLOSE`を実行するとファイル属性が`DOS _OPEN`時点の値に書き戻されるため、
プログラム実行前後で読み込み専用属性は同じになります。


## colorbar
カラーバーのような画像を描画します。  
(カラーバーではないのでカラーバーとして使うことはできません。)


## conctrl_so
`DOS _CONCTRL`で引数が少ないファンクションを呼び出した場合に、スタック上に積まれた引数より
多くのメモリを読み込んでしまう挙動(Human68k v3.02)を検証します。  

メインメモリ容量を11MB以下にし、メインメモリの高位アドレスにメモリブロックやRAMDISK
などのバッファがない状態で実行してください。バスエラーが発生します。

コマンドライン引数で動作モードを指定できます(無指定時は`c`)。
* `f` ... MD = 14
* `w` ... MD = 16
* `c` ... MD = 17

`f`と`w`はHIOCS.Xでも問題が再現するものとして選定しました(元の処理ルーチンに飛ぶため)。
MD = 15も元の処理ルーチンに飛びますが、追加の引数が2ワードあるため該当しません。
`c`については元の処理ルーチンには飛ばずIOCSコールを使うため再現しません。

なおエミュレータによっては、バスエラーではなくアドレスエラーが発生するものがあります
(関連: [buserr_2w](b.md#buserr_2w))。


## con_scroll
コンソール画面のスクロールをテストします。  
なにかキーを押すと次のモードに進みます。


## crampedexec
空きメモリ容量を指定したサイズに制限してファイルを実行します。

一つ目のコマンドライン引数で空きメモリ容量を指定します。
これには実行するプロセスのメモリ管理ポインタ、PSPの容量は含みません。  
数値の後にバイト数の単位を指定することができます。
* (省略) ... バイト単位
* `k` ... キロバイト単位
* `m` ... メガバイト単位

二つ目以降のコマンドライン引数で実行ファイルとその引数を指定します。

空きメモリ空間が分断されている場合は、指定通りに空きメモリ容量が制限されない場合があります。

