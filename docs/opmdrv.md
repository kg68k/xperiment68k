# OPMDRV\*.X

## md_on
> [!IMPORTANT]
> OPMDRV2.X専用です。

`OPM _MD_ON`でMIDIチャンネルを出力許可し、結果を表示します。
コマンドライン引数でチャンネル番号を指定します(省略時は全チャンネル)。


## md_off
> [!IMPORTANT]
> OPMDRV2.X専用です。

`OPM _MD_OFF`でMIDIチャンネルを出力禁止し、結果を表示します。
コマンドライン引数でチャンネル番号を指定します(省略時は全チャンネル)。


## md_stat
> [!IMPORTANT]
> OPMDRV2.X専用です。

`OPM _MD_STAT`でMIDIチャンネル出力許可・禁止状態を取得し、結果を表示します。
コマンドライン引数でチャンネル番号を指定します(省略時は全チャンネル)。


## m_alloc
`OPM _M_ALLOC`でトラックバッファを確保し、結果を表示します。
コマンドライン引数でトラック番号とバッファサイズ(バイト数)を指定します。


## m_assign
`OPM _M_ASSIGN`でチャンネルにトラック番号を割り当て、結果を表示します。
コマンドライン引数でチャンネル番号とトラック番号を指定します。


## m_atoi
`OPM _M_ATOI`でトラックバッファの先頭アドレスを取得し、結果を表示します。
コマンドライン引数でチャンネル番号(OPMDRV.X、OPMDRV2.X)、
またはトラック番号(OPMDRV3.X)を指定します。


## m_chan
> [!IMPORTANT]
> OPMDRV3.X専用です。

`OPM _M_CHAN`で出力チャンネルを設定・取得し、結果を表示します。
コマンドライン引数の数で動作が異なります。

* 引数が0個 ... 全チャンネルの割り当てを一覧表示します。
* 引数が1個(チャンネル番号) ... 現在の割り当てを表示します。
* 引数が2個(チャンネル番号、出力チャンネル番号) ... 割り当てを変更します。

ただし、`m_chan -1`として実行すると全チャンネルの割り当てを初期化します。


## m_cont
`OPM _M_CONT`で演奏を再開し、結果を表示します。
コマンドライン引数でチャンネル番号を指定します(省略時は全チャンネル)。


## m_free
`OPM _M_FREE`でトラックバッファの残りバイト数を取得し、結果を表示します。
コマンドライン引数でトラック番号を指定します。


## m_freea
> [!IMPORTANT]
> OPMDRV3.X専用です。

`OPM _M_FREEA`でトラックバッファの全バイト数を取得し、結果を表示します。


## m_ifchk
> [!IMPORTANT]
> OPMDRV3.X専用です。

`OPM _M_IFCHK`でMIDIインターフェイスの有無を検出し、結果を表示します。


## m_init
`OPM _M_INIT`でトラックバッファを初期化し、結果を表示します。
OPMDRV3.Xでは音色を初期化するモードで呼び出していますが、
なにかコマンドライン引数を指定すると音色を初期化しないモードになります。


## m_intoff
`OPM $0e`で割り込みを停止し、結果を表示します。


## m_inton
`OPM $0d`で割り込みを開始し、結果を表示します。


## m_pan
`OPM _M_PAN`でチャンネルのパンポットを設定・取得し、結果を表示します。
コマンドライン引数の数で動作が異なります。

* 引数が0個 ... 全チャンネルのパンポットを一覧表示します。
* 引数が1個(チャンネル番号) ... 現在のパンポットを表示します。
* 引数が2個(チャンネル番号、パンポット) ... パンポットを設定します。
  チャンネル番号に`-1`を指定すると全チャンネルに対し設定します。


## m_play
`OPM _M_PLAY`で演奏を開始し、結果を表示します。
コマンドライン引数でチャンネル番号を指定します(省略時は全チャンネル)。


## m_prog
> [!IMPORTANT]
> OPMDRV3.X専用です。

`OPM _M_PROG`でチャンネルの音色番号を設定・取得し、結果を表示します。
コマンドライン引数の数で動作が異なります。

* 引数が0個 ... 全チャンネルの音色番号を一覧表示します。
* 引数が1個(チャンネル番号) ... 現在の音色番号を表示します。
* 引数が2個(チャンネル番号、音色番号) ... 音色番号を設定します。
  チャンネル番号に`-1`を指定すると全チャンネルに対し設定します。


## m_stat
`OPM _M_STAT`で演奏状態を取得し、結果を表示します。
コマンドライン引数でチャンネル番号を指定します(省略時は全チャンネル)。


## m_stop
`OPM _M_STOP`で演奏を停止し、結果を表示します。
コマンドライン引数でチャンネル番号を指定します(省略時は全チャンネル)。


## m_tempo
`OPM _M_TEMPO`で曲のテンポを指定し、結果を表示します。
コマンドライン引数でテンポを指定します。


## m_trk
`OPM _M_TRK`でトラックへMMLを書き込み、結果を表示します。
コマンドライン引数でトラック番号とMMLを指定します。


## m_use
> [!IMPORTANT]
> OPMDRV3.X専用です。

`OPM _M_USE`でトラックバッファの使用容量を取得し、結果を表示します。
コマンドライン引数でトラック番号(省略時は-1)を指定します。


## m_version
> [!IMPORTANT]
> OPMDRV3.X専用です。

`OPM _M_VERSION`でバージョンと作成年月日を取得、結果を表示します。


## m_vol
> [!IMPORTANT]
> OPMDRV3.X専用です。

`OPM _M_VOL`でチャンネルのボリュームを設定・取得し、結果を表示します。
コマンドライン引数の数で動作が異なります。

* 引数が0個 ... 全チャンネルのボリュームを一覧表示します。
* 引数が1個(チャンネル番号) ... 現在のボリュームを表示します。
* 引数が2個(チャンネル番号、ボリューム) ... ボリュームを設定します。
  チャンネル番号に`-1`を指定すると全チャンネルに対し設定します。


## opmdrvtype
組み込まれているOPMDRV\*.Xの種類を表示します。

OPMDRV3.Xの場合はファンクションコールで取得したバージョン番号と作成年月日も表示します。
なお組み込み時にversion 1.11と表示されるファイルは、バージョン番号は1.2となっています。

Z-MUSIC v2/v3、MEW OPM DRIVERなどの互換ドライバは組み込みなしとして扱います。

OPMDRV.XとOPMDRV2.Xをファンクションコールで判別することはできそうにないので、
`IOCS _OPMDRV`の処理ルーチンの先頭の命令を見て判別しています。
OPMDRV\*.Xや互換ドライバの種類やバージョンによっては誤判別する可能性があります。

